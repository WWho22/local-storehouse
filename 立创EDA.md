# 立创EDA

## 入门篇

### 电路分析基础

#### 原理图（schematic diagram）

用于实物与所用模块的一一对应，便于看板子的所用模块与对应功能

![image-20250107174413288](image/image-20250107174413288.png)

所有原理图都由四要素组成

![image-20250107174724053](image/image-20250107174724053.png)

**连接线**

![image-20250108215203199](image/image-20250108215203199.png)

铜箔条和铜箔块

![image-20250108215309165](image/image-20250108215309165.png)

**节点**

![image-20250108215413755](image/image-20250108215413755.png)

注：**导通是指节点处所有连接的导线和元件引脚都有电气连接关系**

![image-20250108215535446](image/image-20250108215535446.png)

![image-20250108215645262](image/image-20250108215645262.png)

红色箭头那里是两条导线互不关联的，就相当于立交桥上下两条通道虽然从上方看是相交，但实际上处于不同层

![image-20250108215738621](image/image-20250108215738621.png)

结点的相连

**网络标签**

![image-20250108215834621](image/image-20250108215834621.png)

标明了各线路之间的连接与作用

![image-20250108215952224](image/image-20250108215952224.png)

网络标签相同的点都连接在一起，之所以采用网络标签是为了简化原理图，不用许多线连着影响美观

![image-20250108220101990](image/image-20250108220101990.png)

![image-20250108220759923](image/image-20250108220759923.png)

常见的电源网络标签，基本上都会用到

#### 基本元件

##### 电容

![image-20250107175105816](image/image-20250107175105816.png)

上述图片有F与mf之类的单位转换，并且记得关联参考方向是指当电流的参考方向与电压的参考方向一致，则把电流和电压的这种参考方向成为关联参考方向，否则为非关联参考方向（电压与电势，电流从高电位流向低点位）

![image-20250107180032447](image/image-20250107180032447.png)

电容也分为贴片电容和插件电容，MLCC电容的高频滤波特性比钽电容和铝电解电容好，但是容值低

电容一般默认单位是微法，电容的读值方法和电阻类似

![image-20250107181538246](image/image-20250107181538246.png)

耐压值是指超过对应压值可能会产生电容损坏甚至爆炸，然后贴片电容的极性一般没有特殊要求，铝电解电容和钽电容的电压极性会有特殊标记，例如铝电解电容的白色或黑色侧边对应的引脚就是正极

电容容量F等于多少mah

![image-20250107182427493](image/image-20250107182427493.png)



##### 电阻

![image-20250107174812121](image/image-20250107174812121.png)

一般电阻读数都是10k欧、3k欧，以k欧为基本单位，记得关联参考方向，当电流与电压参考方向相同时，电压才能写为正

常见电阻的读数，插拔电阻与贴片电阻

![image-20250107174905762](image/image-20250107174905762.png)

然后不同电阻的额定功率不同，超过额定功率可能会导致电阻过热烧坏

##### 电感

![image-20250107182714950](image/image-20250107182714950.png)

与电容一样，电感不会消耗能量，而是将电能存储起来

![image-20250107182937632](image/image-20250107182937632.png)

跟电容和电阻一样，也是封装有分贴片电感和插件电感

![image-20250107183105226](image/image-20250107183105226.png)

电感的读值方法和电容、电阻差不多，电感的基本单位是微亨

##### 二极管

![image-20250107202715608](image/image-20250107202715608.png)

基本特性是单向导通性，可以用作交流电整流和对电源电压稳压

![image-20250107202921123](image/image-20250107202921123-17362529621991.png)

二极管的电压与电流关系图，当施加在二极管上的正向电压小于死区电压时，，此时二极管没有电流。二极管是有电压损耗的，当电压达到导通区时，会存在导通压降，并且导通压降应该要越小越好。当二极管处于截止区时，电压反向，但二极管并不是完全没有电流。当反向电压达到击穿电压，然后继续增大电压时，反向击穿电流会不断增大使得二极管电压维持在击穿电压，这通常被用在电源稳压上。

![image-20250107203815758](image/image-20250107203815758.png)

二极管的种类，常用的可能就是稳压二极管、发光二极管

![image-20250107203922168](image/image-20250107203922168.png)

![image-20250107203959475](image/image-20250107203959475.png)

区分二极管的引脚极性

##### 三极管

![image-20250107204015879](image/image-20250107204015879.png)

三极管通常用作电流放大，将微弱的型号放大成为幅值较大的电信号，又是可以用作无触点的开关

![image-20250107205925323](image/image-20250107205925323.png)

有NPN和PNP两种三极管，箭头指向N。注：PN结是一种特殊的半导体结，它由两个不同类型的半导体材料（通常时N型和P型）组成，它们在它们的交界处形成一个空间电荷区。**PN结具有单单向导电性，电流由P流向N。**

NPN共阳极接出一个基极，PNP共阴极接出来一个基极。

![image-20250107210710580](image/image-20250107210710580.png)

![image-20250107210740688](image/image-20250107210740688.png)

由基极电流控制集电极电流与发射极电流，基极电流大的时候集电极与发射极的电流就会大；当基极电流小的时候，集电极与发射极的电流就会小。

三极管接电有三种状态：截止状态、放大状态、饱和状态

![image-20250107211022538](image/image-20250107211022538.png)

截止状态：加在三极管发射极的电压小于PN结的导通电压，基极电流为0。

![image-20250107211246476](image/image-20250107211246476.png)

放大状态：发射结正偏，集电结反偏，三极管进入放大状态。

![image-20250107211612368](image/image-20250107211612368.png)

饱和状态：此时即使基极电流变大，集电极电流也不会再增大。

![image-20250107211741182](image/image-20250107211741182.png)

![image-20250107211823413](image/image-20250107211823413.png)

三极管的应用，播音喇叭和灯泡开关

![image-20250107211921636](image/image-20250107211921636.png)

三极管的封装

##### 场效应管（MOS管）

![image-20250107211944166](image/image-20250107211944166.png)

S极为源极，G极为栅极，D极为漏极。和三极管一样，箭头指向N，Q3为N沟道，Q4为P沟道

![image-20250107212202611](image/image-20250107212202611.png)

三极管与MOS管的区别

![image-20250107212229620](image/image-20250107212229620.png)

不同种类的MOS管

![image-20250107212259780](image/image-20250107212259780.png)

![image-20250107212311396](image/image-20250107212311396.png)



#### 元件数据手册

主要关注引脚功能和电气特性

![image-20250108210447102](image/image-20250108210447102.png)

元件数据手册主要帮助我们了解**芯片的功能**、内部引脚的功能、电气特性以及**如何围绕该芯片进行电路设计**。会有**示例电路**提供基本模板，后续根据自身需求修改其他元件的value值。并且如果芯片数据手册中有PCB布局设计参考，则是该芯片有额外的PCB布局设计要求，最好遵循。最后一节封装则是有芯片的机械尺寸，在AD里边可能没有元件库，就要自己画。

#### 电路定理

**前置知识**

![image-20250108221449620](image/image-20250108221449620.png)

![image-20250108235436068](image/image-20250108235436068.png)

![image-20250108235706416](image/image-20250108235706416.png)

即网孔已经是最简形式了，无法再被简化，把该平面电路看作渔网，则只有两个网孔，由此可以辨别出来。ACDBFEA之所以不是网孔，是因为其中间还有一条支路，不是最简形式。根据网孔所列出来的方程组就是最简方程组，电路分析会比较简单。

**基尔霍夫电路**

![image-20250109000800505](image/image-20250109000800505.png)

同一电路元件在不同条件下展现出不同的元件特性，比如在高频、低频和理想状态下，电阻的特性不同

![image-20250109000928394](image/image-20250109000928394.png)

因此把理想化的电路元件称为集总参数元件，一般来说在低频和理想状态情况下可以利用集总参数电路模型进行分析

**基尔霍夫电流定律（KCL）**

![image-20250109001212191](image/image-20250109001212191.png)

其实就是结点电流的流入与流出代数和相同，并且图中的电流方向是参考方向，即自己设置的，要根据算出来的电流大小判定实际电流的方向

![image-20250109001446102](image/image-20250109001446102.png)

一个包围了多个节点的闭合回路，可将该回路视作一个节点进行分析

![image-20250109001557806](image/image-20250109001557806.png)

**基尔霍夫电压定律（KVL）**

![image-20250109001653999](image/image-20250109001653999.png)

与KCL不同，KVL针对回路进行电压分析。

![image-20250109001809182](image/image-20250109001809182.png)

实际上选定回路绕行方向，即参考方向，就是选择是以电压升为正方向还是以电压降作为正方向。

![image-20250109001953387](image/image-20250109001953387.png)

类似于KCL，KVL是回路中所有电路元件的电位差代数和为0，并且实际的电压降方向也是要根据算出的电位差来得出。若算出来的值是正值，电压降为正方向，若是负值，则参考方向与实际方向相反，电压升是正方向。

![image-20250109002133543](image/image-20250109002133543.png)

![image-20250109002509600](image/image-20250109002509600.png)



额外知识

电容的整流特性

电容的滤波特性

![image-20250108203743173](image/image-20250108203743173.png)

#### 读懂原理图

![image-20250109203949634](image/image-20250109203949634.png)

![image-20250109204109067](image/image-20250109204109067.png)

对于一些关键信号和模块的功能会用注释来标注，感觉和sw的工图差不多

NC表示no connect，即该模块无需连接；NF表示no fix，即该元件默认不安装；0R，表示其为0欧的电阻。

![image-20250109210531123](image/image-20250109210531123.png)

原理图一般按功能将模块电路分类，在看原理图时可以按照每个模块功能进行分析，去器件商城看模块对应芯片的数据手册来查询芯片功能和引脚功能。看原理图时，需要根据芯片数据手册上的示例电路来分析

![image-20250109212056712](image/image-20250109212056712.png)

![image-20250109212124654](image/image-20250109212124654.png)

![image-20250109212140923](image/image-20250109212140923.png)

若设计的电路比较复杂，需要在原理图上加上电源树与系统框图

![image-20250109212328428](image/image-20250109212328428.png)

![image-20250109212714510](image/image-20250109212714510.png)

![image-20250109212737879](image/image-20250109212737879.png)

比如单片机在启动时对一些引脚的电平有要求，这样我们在看原理图时就会注意到这几个IO口的高低电平配置

![image-20250109212859862](image/image-20250109212859862.png)

![image-20250109212916161](image/image-20250109212916161.png)

##### PCB结构与组成

![image-20250109223448076](image/image-20250109223448076.png)

![image-20250109223513528](image/image-20250109223513528.png)

![image-20250109223540653](image/image-20250109223540653.png)

在PCB板上导线通常就是班上细铜箔组成的铜线

![image-20250109223718752](image/image-20250109223718752.png)

![image-20250109224129123](image/image-20250109224129123.png)

铺铜一般是等布线布完以后再铺，信号线上的电平包括高低电平，即电平会改变，铺铜一般是接地或接电源，电平不改变

![image-20250109224847696](image/image-20250109224847696.png)

隔热焊盘那里采用十字连接，目的是为了防止焊接时焊锡降温降太快

![image-20250109230536369](image/image-20250109230536369.png)

可以看作不同层电路的导线，形象一点来说就是连接二楼和地面的楼梯

![image-20250109230739682](image/image-20250109230739682.png)

各种过孔的目的最终都是导通不同层的电路

![image-20250109231023220](image/image-20250109231023220.png)

![image-20250109231543704](image/image-20250109231543704.png)

![image-20250109231600575](image/image-20250109231600575.png)

丝印提供了焊盘该焊接什么元件的信息

![image-20250109231641062](image/image-20250109231641062.png)

其实就是在铜箔和铜线上多加了一层隔绝层，但是会把焊盘漏出来，目的是为了防止铜线和铜箔短路。展玮哥那时候用橡皮泥多搞了一层阻焊貌似就是像二次阻隔？

![image-20250109231838740](image/image-20250109231838740.png)

##### PCB叠层结构

![image-20250110101503034](image/image-20250110101503034.png)

PCB板中起到绝缘和支撑作用的主要是基板，基板由PP半固态片和芯板两部分组成，右下角的图是一块双层板的图

![image-20250110102018942](image/image-20250110102018942.png)

四层板、六层板等多层板，每层的作用是信号层、电源层还是地层看我们设计，当然对于两层板这种基础板就不需要什么叠层设计

![image-20250110102141079](image/image-20250110102141079.png)

![image-20250110102824417](image/image-20250110102824417.png)

两层板顶层和底层需要包括信号层、电源层和铺地

![image-20250110102919039](image/image-20250110102919039.png)

在PCB设计时需要不断切换图层来完成设计

![image-20250110103026715](image/image-20250110103026715.png)

PCB图层大致分为三类，但立创EDA还包括了3D外壳层

![image-20250110103111182](image/image-20250110103111182.png)

![image-20250110103612316](image/image-20250110103612316.png)

![image-20250110103643897](image/image-20250110103643897.png)

阻焊其实就是围着焊盘的那一小圈，中间填充部分就是焊盘，在覆油墨的时候会避开焊盘

![image-20250110103827068](image/image-20250110103827068.png)

锡膏层的作用是对贴片元件进行回流焊

![image-20250110103937421](image/image-20250110103937421.png)

过孔中间的区域被称为多层，其实就是过孔打通的那部分区域

![image-20250110104111289](image/image-20250110104111289.png)![image-20250110104144541](image/image-20250110104144541.png)

立创中板框的大小不是通过机械层设置的，而是有专门的板框层

![image-20250110104310033](image/image-20250110104310033.png)

就跟sw差不多，可以建模防护板子的机械外壳

##### 元件符号与封装

![image-20250110110608030](image/image-20250110110608030.png)

元件主要包括三个要素，元件符号、元件封装、元件实物与元件封装3D图

![image-20250110110747565](image/image-20250110110747565.png)

元件一号引脚上方有个小圆点，用来标识元件的一号引脚，元件实物上也有，元件封装一号引脚旁边有个小圆点与之对应。黄色线条就是丝印，丝印尺寸的大小就是实物尺寸的大小。

![image-20250110111731442](image/image-20250110111731442.png)

丝印里边有一个小点，在元件实物上也有对应的小点，用于标识元件安装方向

![image-20250110111901604](image/image-20250110111901604.png)

LED的封装，1号焊盘为正，2号焊盘为负

![image-20250110111850682](image/image-20250110111850682.png)

typeC的符号与封装

![image-20250110112005658](image/image-20250110112005658.png)

也有焊接方向不影响是由的，比如拨片开关

![image-20250110112048897](image/image-20250110112048897.png)

最后是STM32F103的芯片封装，实物图上芯片也有对应的小点和丝印上对应

##### PCB设计流程

![image-20250110160527872](image/image-20250110160527872.png)

![image-20250110160558802](image/image-20250110160558802.png)

原理图和PCB都要进行DRC检查，比如原理图上元件的引脚悬空、PCB两个不同的网络相连在一起短路了。PCB的bom表是指电子元件的购买清单。元件布局是分功能分模块的进行，布局是布线的前提，检查DRC完成后导出Gerber文件，Gerber文件就是生产文件。

## 强化篇

### 51单片机核心板

#### 单片机最小系统

![image-20250110193318574](image/image-20250110193318574.png)

![image-20250110193431971](image/image-20250110193431971.png)

#### 元件选型

![image-20250110193535368](image/image-20250110193535368.png)

6pin、16pin、24pin的typeC接口分别对应仅供电、USB2.0、USB3.0

[Type-C 电路设计](https://blog.csdn.net/Stanford_sun/article/details/137726507?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522d336c4ac7d61dc699c5c29556edf5461%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=d336c4ac7d61dc699c5c29556edf5461&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-137726507-null-null.142^v101^pc_search_result_base5&utm_term=typec%E5%85%85%E7%94%B5%E6%8E%A5%E5%8F%A3%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1&spm=1018.2226.3001.4187)

且电脑和充电器输出的电压都是5V，为了降低最小系统板的能耗，这里选择LDO芯片AMS1117，这是一款线性稳压器，用于将5V电压稳定在3.3V

![image-20250110193959139](image/image-20250110193959139.png)

![image-20250110203954182](image/image-20250110203954182.png)

##### 电容滤波

稳压器这里采用双通道滤波，两个不同容值的电容并联，可以起到比单一容值电容更好的滤波效果，且滤波速度更快。输入输出都放滤波电容的原因是输入和输出可能都有杂波。

![image-20250110205109713](image/image-20250110205109713.png)

![img](https://i-blog.csdnimg.cn/blog_migrate/4369364b84cfa5ab04fba1afebea97c1.png)

电源附近要加一颗旁路电容，它是电路中装设在元件的电源端的电容，通过提供稳定的电源和降低噪声干扰（滤除输入信号中的高频成分），确保电路的正常运行。

[电容滤波原理](https://blog.csdn.net/weixin_43044825/article/details/131854427?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522a408ce4d9e13bb13a3434d0077f64d0e%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=a408ce4d9e13bb13a3434d0077f64d0e&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-131854427-null-null.142^v101^pc_search_result_base5&utm_term=%E7%94%B5%E5%AE%B9%E5%A6%82%E4%BD%95%E6%BB%A4%E6%B3%A2&spm=1018.2226.3001.4187)

信号输入端接旁路电容先接一颗大容值的电容滤低频信号，再接一颗小容值的电容滤高频信号

信号输出端加去耦电容先接一颗小容值的电容滤除高频信号，再接一颗大容值的电容滤除低频信号，目的也是为了滤除干扰信号

[旁路和去耦电容的区别](https://blog.csdn.net/chenhuanqiangnihao/article/details/118551254?ops_request_misc=%257B%2522request%255Fid%2522%253A%252298ebe9bf3d6cf370643dabe422a9afe3%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=98ebe9bf3d6cf370643dabe422a9afe3&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-118551254-null-null.142^v101^pc_search_result_base5&utm_term=%E5%8E%BB%E8%80%A6%E5%92%8C%E6%97%81%E8%B7%AF%E7%9A%84%E5%8C%BA%E5%88%AB&spm=1018.2226.3001.4187)

![image-20250110212607558](image/image-20250110212607558.png)

下拉电路，这里电容充电充满之前，电阻与电容分压，RST处电压为中间值。当电容充电充满以后，电流变小，电阻负载的电压也变小，因而RST处的电位被电阻下拉。若想要RST处的电位回复到之前，在电容处并联一个按键开关，当按下开关时将电容短路，从而RST电位复位，单片机运行状态也回复到最初状态。

[上拉电阻与下拉电阻的工作原理](https://blog.csdn.net/qq_34301282/article/details/133682889?ops_request_misc=%257B%2522request%255Fid%2522%253A%25223405028043445160c97c19033778c535%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=3405028043445160c97c19033778c535&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-133682889-null-null.142^v101^pc_search_result_base5&utm_term=%E4%B8%8A%E6%8B%89%E7%94%B5%E9%98%BB%E5%92%8C%E4%B8%8B%E6%8B%89%E7%9A%84%E5%8C%BA%E5%88%AB&spm=1018.2226.3001.4187)

[开漏输出和推挽输出](https://blog.csdn.net/qq_47607743/article/details/135195629?ops_request_misc=%257B%2522request%255Fid%2522%253A%252290bd288f083fcd46bd0f1ecc8a2d29e7%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=90bd288f083fcd46bd0f1ecc8a2d29e7&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-135195629-null-null.142^v101^pc_search_result_base5&utm_term=%E5%BC%80%E6%BC%8F%E8%BE%93%E5%87%BA%E4%B8%8E%E6%8E%A8%E6%8C%BD%E8%BE%93%E5%87%BA&spm=1018.2226.3001.4187)

开漏输出引脚结点不外接上拉电阻和电源的话只能输出低电平，当外接上拉电阻和电源后，mos管未导通的话引脚输出高电平，导通后输出低电平？因为IO口要能输出高低电平，所以才要外接电源和电阻保证额能输出高低电平

![image-20250111110159913](image/image-20250111110159913.png)

按键开关电路，回头查查

#### 原理图绘制要求

- 按功能分块
- 分块记得写注释

#### PCB绘制要求

- 晶振电路一定要离单片机近，并且晶振两端离电容和单片机引脚的距离近似相等。其他信号线可以随便走，但是晶振电路一定不能受干扰，否则单片机按设定的波特率与外设通信会通信不上。，晶振电路设计好了，信号线是可以随便走。
- 元件与引脚相连的端要与引脚一一相对
- 千万别用自动布线
- 布线要求
- ![image-20250112215749999](image/image-20250112215749999.png)
- ![image-20250112224207445](image/image-20250112224207445.png)
- ![image-20250112224452582](image/image-20250112224452582.png)
- 打过孔不要在输入电源与电源线上打，环路太多会有电感效应。在地平面上打过孔的作用是加快散热，增加过电流。

## 最终收尾

